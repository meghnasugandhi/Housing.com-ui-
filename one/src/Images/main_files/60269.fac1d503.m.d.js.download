"use strict";(self.webpackChunkhousing_demand=self.webpackChunkhousing_demand||[]).push([[60269],{60269:(e,t,n)=>{n.d(t,{A:()=>b});var s=n(63502),o=n(75641),r=n(28667),a=n(47651),c=n(93917),l=n(92925),i=n(82804);const u={CITY_SELECTION:()=>({category:"filter_bar_mobile",action:"open_city_selection"}),CITY_SELECTION_CITY_SELECTED:e=>{const{seo:{pageTypeMajor:t=""}={}}=e||{};return{category:`${t}_screen`,action:"city_selection",label:"city_selected"}}};var f=n(26541),p=n(95777),d=n(26401);const h=(0,s.css)("width:100%;border:none;font-size:14px;line-height:34px;background-color:transparent;&::placeholder{color:rgba(0,0,0,0.3);}@media (",f.hf,"){font-size:14.5px;}"),g=(0,s.css)(".input-container{&::after{position:absolute;top:0;right:15px;transform:rotateZ(270deg);font-size:12px;color:rgba(0,0,0,0.3);",(0,d.Ay)("arrowLeft")," pointer-events:none;@media (",f.hf,"){font-size:12.5px;}}}"),m={name:"1jsxji9",styles:".input-container{&::after{transform:rotateZ(90deg);}}"},x=(0,s.css)("font-size:10px;color:#999;text-transform:uppercase;pointer-events:none;@media (",f.hf,"){font-size:10.5px;}"),y={name:"lz6w56",styles:"width:158px;padding-left:15px;line-height:50px;.content-container{overflow:auto;box-shadow:0 1px 10px 0 rgba(0,0,0,0.2);z-index:2;}"},C={name:"aw4os4",styles:"max-height:338px;"},v=(0,s.css)("padding-left:16px;background-color:#fff;font-size:12px;line-height:26px;cursor:pointer;@media (",f.hf,"){font-size:12.5px;}"),E=(0,s.css)("color:#fff;background-color:",p.A.primary,";"),b=(0,r.A)({props:e=>{let{filters:{service:t,category:n}}=e;return{service:t,category:n}},actions:{fetchAllCities:i.A}})((e=>{let{data:t=[],changeCity:n,service:r,category:i,currentCity:f,lineHeight:p=26,style:d,placeholder:b="Select City",fetchAllCities:O,inputValue:S,changeInputValue:_=()=>{},setIsCitySelectionOpen:T=()=>{}}=e;const[k,w]=(0,o.useState)(!1),N=(0,a.A)(u),[j,A]=(0,o.useState)(!1),[I,L]=(0,o.useState)(!1),[R,D]=(0,o.useState)([]),getCityList=e=>{e=e||"";let n=[];return t.length&&t.forEach((t=>{const s={id:t.id,name:t.label,heading:!0},o=t.list.filter((t=>t.name.toLowerCase().indexOf(e)>=0||t.url.toLowerCase().indexOf(e)>=0));o.length&&(n=n.concat([s,...o]))})),n};(0,o.useEffect)((()=>{D(getCityList())}),[t]),(0,o.useEffect)((()=>{j&&O({service:r,category:i})}),[j,r,i]);const z=(0,o.useRef)(null);let P="";const[Y,W,B,M]=(0,l.A)(R,{onSelect:function onSelect(){w(!1),z.current&&z.current.blur(),setTimeout((()=>n(Y)),0),H(Y),_(Y.name),z.current&&(z.current.value="")},defaultBehaviour:e=>{P=e&&e.target.value&&e.target.value.toLowerCase();let t=getCityList(P);t.length||(t=[{id:"noresults",name:"No Results Found",heading:!0}]),D(t)},defaultSelectedEntity:f,noLoop:!0,onChange:e=>{L(!0)}}),[F,H]=(0,o.useState)(Y),[V,Z]=(0,o.useState)(!1);(0,o.useEffect)((()=>{W(F),T(k)}),[k]);const K=(0,s.jsx)("div",null,(0,s.jsx)("input",{type:"text",ref:z,css:h,placeholder:Y?Y.name:b,onKeyUp:B,className:"search-bar",value:S,onChange:e=>_(e.target.value),onFocus:()=>{!j&&A(!0)}}));return(0,o.useEffect)((()=>{Z(M>3?Math.min(M-3,R.length-6)*p:0)}),[R.length,M]),(0,s.jsx)(c.A,{inputComponent:K,onToggle:(0,o.useCallback)((e=>{w(e)}),[w]),open:k,style:[y,g,k&&m,d],track:N,eventContract:{DROPDOWN_OPEN:"CITY_SELECTION"},scrollShift:V,scrollBehavior:"smooth"},k&&(0,s.jsx)("ul",{className:"list",css:C},R.map((e=>{const t=[v,Y&&Y.id===e.id?E:""];return(0,s.jsx)("li",{key:e.id,css:(0,s.css)([t,e.heading&&x],""),onClick:()=>{_(e.name),w(!1),H(e),W(e),setTimeout((()=>{n(e),N("CITY_SELECTION_CITY_SELECTED"),z.current&&(z.current.value="")}),0)},onMouseOver:t=>((e,t)=>{if(e.preventDefault(),I)return setTimeout((()=>L(!1)),10);W(t)})(t,e),className:"item"},e.name)}))))}))},93917:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(63502),o=n(75641),r=n.n(o),a=n(73132);const c={name:"b3pn3b",styles:"display:inline-block;position:relative;"},l={name:"ekk0gt",styles:"position:absolute;top:100%;left:0;min-width:100%;scroll-behavior:smooth;"},i={name:"1leuajc",styles:"position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(255,0,0,0);cursor:auto;"},u={name:"1hyfx7x",styles:"display:none;"};var f=n(43286);const p=r().forwardRef(((e,t)=>{const{style:n,inputComponent:r,children:p,onToggle:d,open:h=!1,scrollShift:g,eventContract:m={},track:x=()=>{},useOverlay:y=!1,getRef:C=()=>{},ssr:v=!1,optionBoxStyle:E}=e;let b=(0,o.useRef)(null),O=(0,o.useRef)(null);const S=(0,o.useRef)(null),_=(0,o.useRef)(!1);(0,o.useImperativeHandle)(t,(()=>({setShowOptions:w})));const T=(0,o.useCallback)((e=>{d&&d(e);const t=e?m.DROPDOWN_OPEN:m.DROPDOWN_CLOSE;x(t)}),[d]),[k,w]=(0,f.A)(b,h,{onToggle:T,excludeElements:[O.current],capture:!1}),onClick=()=>{C(b),w(!k)},N=(0,a.A)("input-container-dropdown",{show:k});return(0,o.useEffect)((()=>{S&&S.current&&g>=0&&(S.current.scrollTop=g)}),[g]),(0,o.useEffect)((()=>{_.current&&w(h),h&&!k&&x(m.DROPDOWN_OPEN)}),[h]),(0,o.useEffect)((()=>{_.current=!0}),[]),(0,s.jsx)("div",{css:(0,s.css)([c,n],""),ref:b,className:N},y&&k&&(0,s.jsx)("div",{css:i,onClick}),(0,s.jsx)("div",{className:"input-container",ref:O,onClick},r),(k||v)&&(0,s.jsx)("div",{css:(0,s.css)([l,!k&&v&&u,E],""),className:"content-container",ref:S},p))}))}}]);